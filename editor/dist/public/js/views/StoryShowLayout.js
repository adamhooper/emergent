(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["marionette","collections/ArticleVersions","views/StoryView","views/StoryArticleListView","views/ArticleVersionListView","views/ArticleVersionListPlaceholderView"],function(e,n,r,i,s,o){var u;return u=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.className="story-show-layout",r.prototype.template=function(){return'<div class="row">\n  <div class="col-xs-12">\n    <div class="story-metadata"></div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-6">\n    <h3>Articles about this story</h3>\n    <div class="article-list"></div>\n  </div>\n  <div class="col-md-6">\n    <h3>Versions</h3>\n    <div class="article-version-list"></div>\n  </div>\n</div>'},r.prototype.regions={story:".story-metadata",articleList:".article-list",articleVersionList:".article-version-list"},r.prototype.initialize=function(){return this.story.on("show",function(e){return function(t){if(t!=null)return e.listenTo(t,"back",function(){return e.trigger("story:back")})}}(this)),this.story.on("close",function(e){return function(t){if(t!=null)return e.stopListening(t)}}(this)),this.articleList.on("show",function(e){return function(t){if(t!=null)return e.listenTo(t,"focus",function(t){return e.focusArticle(t)})}}(this)),this.articleList.on("close",function(e){return function(t){if(t!=null)return e.stopListening(t)}}(this))},r.prototype.focusArticle=function(e){var t;return t=new n([],{articleId:e.id}),t.fetch({success:function(){return t.add({})}}),this.articleVersionList.show(new s({collection:t})),this.$el.addClass("article-focused")},r}(e.Layout),u.forStoryInRegion=function(e,t){var n;return n=new u,t.show(n),e.articles.add({}),n.story.show(new r({model:e})),n.articleList.show(new i({collection:e.articles})),n.articleVersionList.show(new o),n},u})}).call(this);