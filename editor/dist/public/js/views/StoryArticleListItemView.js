(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["underscore","marionette"],function(e,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.tagName="li",r.prototype.className="article",r.prototype.template=e.template('<% if (!isNew) { %>\n  <a href="#"><%- url %></a>\n<% } else { %>\n  <form method="post" action="#">\n    <div class="input-group">\n      <input name="url" class="form-control" placeholder="http://url.related.to/this/story">\n      <span class="input-group-btn">\n        <button type="submit" class="btn btn-primary">Add</button>\n      </span>\n    </div>\n  </form>\n<% } %>'),r.prototype.ui={url:"input[name=url]"},r.prototype.events={"submit form":"onSubmit","click a":"onClick"},r.prototype.serializeData=function(){var e;return e=this.model.toJSON(),{isNew:this.model.isNew(),url:e.url}},r.prototype.onClick=function(e){return e.preventDefault(),this.trigger("click",this.model)},r.prototype.onSubmit=function(e){var t;e.preventDefault(),t=this.ui.url.val().trim();if(t)return this.model.save({url:t},{success:function(e){return function(t,n){return e.onSubmitSuccess(n)}}(this),error:function(e){return function(t,n){return e.onSubmitError(n)}}(this)}),this.$(".input-group-btn").replaceWith('<span class="input-group-addon form-control-feedback"><i class="spin">⟳</i></span>'),this.$("input").prop("disabled",!0),this.trigger("create",this.model)},r.prototype.onSubmitSuccess=function(e){return this.render()},r.prototype.onSubmitError=function(e){return this.$(".form-control-feedback").replaceWith('<span class="input-group-addon form-control-feedback"><i class="error">✘</i></span>'),this.$el.addClass("has-error")},r}(n.ItemView)})}).call(this);